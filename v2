-- Full Script with Server Hop and Egg Search (searches only for Void Egg)
local Players = game:GetService("Players")
local TeleportService = game:GetService("TeleportService")
local LocalPlayer = Players.LocalPlayer
local HttpService = game:GetService("HttpService")
local PlaceId = game.PlaceId

-- Configuration Variables
local egg_amount = "max" -- Number of eggs to hatch at once (set to "max" for max eggs)
local open_eggs = true -- Set to true to hatch eggs, false to just find them
local target_egg = "Void Egg"  -- We're focusing on finding the Void Egg
local luckTags = {"5x", "10x", "25x"}  -- Luck tags for eggs (5x, 10x, 25x)

-- Function to fly to the egg and start opening it
function flyToEgg(egg)
    local root = LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("HumanoidRootPart")
    if root and egg then
        local eggPosition = egg.CFrame.Position
        local direction = (eggPosition - root.Position).unit
        -- Fly to the egg (simple approach)
        while (root.Position - eggPosition).Magnitude > 5 do
            root.CFrame = root.CFrame + direction * 10
            wait(0.1)  -- Minimal delay to simulate flying
        end
        -- Once at the egg, open it
        openEgg(egg)
    else
        warn("No egg or root part found, cannot fly.")  -- Using warn() for better visibility
    end
end

-- Function to hatch the egg (if open_eggs is true)
function openEgg(egg)
    if open_eggs then
        print("Opening egg: " .. egg.Name)  -- Use print to log egg opening
        
        -- Trigger egg opening action (replace with actual event)
        local eggOpenEvent = game.ReplicatedStorage:FindFirstChild("EggOpenEvent")
        
        if eggOpenEvent then
            -- Fire the event to open the egg (you might need to send additional parameters)
            eggOpenEvent:FireServer(egg)
        else
            warn("EggOpenEvent not found!")  -- Using warn() for better visibility
        end
    else
        print("Egg found but not opening: " .. egg.Name)  -- Informing that egg is found but not opened
    end
end

-- Server hop function with 10 seconds delay before hopping
local checked = {}
function hop()
    print("Waiting 10 seconds before hopping to a new server...")
    wait(10)  -- Delay before hopping to a new server
    
    local cursor = ""
    while true do
        local url = ("https://games.roblox.com/v1/games/%s/servers/Public?limit=100&cursor=%s&sortOrder=Asc"):format(PlaceId, cursor)
        local data = HttpService:JSONDecode(game:HttpGet(url))
        for _, s in ipairs(data.data) do
            if not checked[s.id] and s.playing < s.maxPlayers and s.id ~= game.JobId then
                checked[s.id] = true
                TeleportService:TeleportToPlaceInstance(PlaceId, s.id, LocalPlayer)
                print("Hopped to a new server: " .. s.id)  -- Confirm server hop
                return
            end
        end
        if not data.nextPageCursor then break end
        cursor = data.nextPageCursor
    end
end

-- Function to search for the Void Egg with luck (5x, 10x, 25x)
function searchForVoidEgg()
    local foundEgg = nil
    
    -- Iterate through all eggs in the workspace
    for _, obj in ipairs(game.Workspace:GetDescendants()) do
        if obj:IsA("Model") and obj.Name == target_egg then
            -- Check if the egg has a luck tag (5x, 10x, or 25x)
            for _, luckTag in ipairs(luckTags) do
                if string.find(obj.Name, luckTag) then
                    foundEgg = obj
                    print("Found a luck egg: " .. obj.Name)  -- Log the egg found
                    break
                end
            end
        end
        if foundEgg then break end  -- Stop searching once the egg is found
    end
    
    return foundEgg
end

-- Main loop (find egg, teleport, server hop, hatch eggs)
spawn(function()
    while true do
        -- Search for the Void egg on the islands
        local foundEgg = searchForVoidEgg()
        
        -- If no Void egg is found, hop to another server
        if not foundEgg then
            print("No Void Egg found in the current server. Hopping to another server...")  -- Log server hop
            hop() -- Perform server hop
        else
            -- Fly to the found Void Egg and open it
            flyToEgg(foundEgg)
            
            -- Keep checking until the egg disappears (if egg is still in the game)
            repeat
                wait(1)  -- Check every 1 second
                foundEgg = searchForVoidEgg()
            until not foundEgg  -- Exit when egg is no longer found
        end
        
        wait(5)  -- Adding a small delay before re-checking
    end
end)
